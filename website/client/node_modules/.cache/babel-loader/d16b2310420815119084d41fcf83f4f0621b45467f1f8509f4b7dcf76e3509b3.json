{"ast":null,"code":"var _jsxFileName = \"/Users/jp/Downloads/2024Fall/CIS 5500/CIS-550/website/client/src/pages/SoundPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nexport default function LazyTable(_ref) {\n  _s();\n  let {\n    route,\n    columns,\n    defaultPageSize = 10\n  } = _ref;\n  const [data, setData] = useState([]);\n  const [page, setPage] = useState(1); // 1-indexed\n  const [pageSize, setPageSize] = useState(defaultPageSize);\n  const [totalRows, setTotalRows] = useState(0);\n\n  // Fetch data whenever route, page, or pageSize changes\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`${route}?page=${page}&page_size=${pageSize}`);\n        if (!response.ok) throw new Error(\"Failed to fetch data.\");\n        const result = await response.json();\n        setData(result.rows || []); // Assume the response has `rows`\n        setTotalRows(result.total || 0); // Assume the response has `total`\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    fetchData();\n  }, [route, page, pageSize]);\n  const handleNextPage = () => {\n    if (page < Math.ceil(totalRows / pageSize)) setPage(page + 1);\n  };\n  const handlePreviousPage = () => {\n    if (page > 1) setPage(page - 1);\n  };\n  const handlePageSizeChange = e => {\n    setPageSize(Number(e.target.value));\n    setPage(1); // Reset to the first page\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      width: \"100%\",\n      borderCollapse: \"collapse\",\n      marginBottom: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, columns.map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col.field,\n    style: {\n      border: \"1px solid black\",\n      padding: \"8px\",\n      textAlign: \"left\",\n      backgroundColor: \"#f2f2f2\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 15\n    }\n  }, col.headerName)))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, data.map((row, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: idx,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, columns.map(col => /*#__PURE__*/React.createElement(\"td\", {\n    key: col.field,\n    style: {\n      border: \"1px solid black\",\n      padding: \"8px\",\n      textAlign: \"left\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, col.renderCell ? col.renderCell(row) : row[col.field])))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handlePreviousPage,\n    disabled: page === 1,\n    style: {\n      padding: \"8px 12px\",\n      cursor: page === 1 ? \"not-allowed\" : \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Previous\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, \"Page \", page, \" of \", Math.ceil(totalRows / pageSize)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleNextPage,\n    disabled: page >= Math.ceil(totalRows / pageSize),\n    style: {\n      padding: \"8px 12px\",\n      cursor: page >= Math.ceil(totalRows / pageSize) ? \"not-allowed\" : \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, \"Next\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: pageSize,\n    onChange: handlePageSizeChange,\n    style: {\n      marginLeft: \"20px\",\n      padding: \"6px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, [5, 10, 25, 50].map(size => /*#__PURE__*/React.createElement(\"option\", {\n    key: size,\n    value: size,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, size, \" rows\")))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"HomePage\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, \"Search Page\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/genre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, \"Genre Page\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/collaboration\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Collaboration\")))));\n}\n_s(LazyTable, \"QWm40IMAP9TypPNWsgc0YKgVb9U=\");\n_c = LazyTable;\nvar _c;\n$RefreshReg$(_c, \"LazyTable\");","map":{"version":3,"names":["React","useEffect","useState","LazyTable","route","columns","defaultPageSize","data","setData","page","setPage","pageSize","setPageSize","totalRows","setTotalRows","fetchData","response","fetch","ok","Error","result","json","rows","total","error","console","handleNextPage","Math","ceil","handlePreviousPage","handlePageSizeChange","e","Number","target","value","width","borderCollapse","marginBottom","map","col","field","border","padding","textAlign","backgroundColor","headerName","row","idx","renderCell","display","justifyContent","alignItems","cursor","marginLeft","size"],"sources":["/Users/jp/Downloads/2024Fall/CIS 5500/CIS-550/website/client/src/pages/SoundPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function LazyTable({ route, columns, defaultPageSize = 10 }) {\n  const [data, setData] = useState([]);\n  const [page, setPage] = useState(1); // 1-indexed\n  const [pageSize, setPageSize] = useState(defaultPageSize);\n  const [totalRows, setTotalRows] = useState(0);\n\n  // Fetch data whenever route, page, or pageSize changes\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`${route}?page=${page}&page_size=${pageSize}`);\n        if (!response.ok) throw new Error(\"Failed to fetch data.\");\n        const result = await response.json();\n        setData(result.rows || []); // Assume the response has `rows`\n        setTotalRows(result.total || 0); // Assume the response has `total`\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    fetchData();\n  }, [route, page, pageSize]);\n\n  const handleNextPage = () => {\n    if (page < Math.ceil(totalRows / pageSize)) setPage(page + 1);\n  };\n\n  const handlePreviousPage = () => {\n    if (page > 1) setPage(page - 1);\n  };\n\n  const handlePageSizeChange = (e) => {\n    setPageSize(Number(e.target.value));\n    setPage(1); // Reset to the first page\n  };\n\n  return (\n    <div>\n      <table style={{ width: \"100%\", borderCollapse: \"collapse\", marginBottom: \"20px\" }}>\n        <thead>\n          <tr>\n            {columns.map((col) => (\n              <th\n                key={col.field}\n                style={{\n                  border: \"1px solid black\",\n                  padding: \"8px\",\n                  textAlign: \"left\",\n                  backgroundColor: \"#f2f2f2\",\n                }}\n              >\n                {col.headerName}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((row, idx) => (\n            <tr key={idx}>\n              {columns.map((col) => (\n                <td\n                  key={col.field}\n                  style={{ border: \"1px solid black\", padding: \"8px\", textAlign: \"left\" }}\n                >\n                  {col.renderCell ? col.renderCell(row) : row[col.field]}\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        <button\n          onClick={handlePreviousPage}\n          disabled={page === 1}\n          style={{ padding: \"8px 12px\", cursor: page === 1 ? \"not-allowed\" : \"pointer\" }}\n        >\n          Previous\n        </button>\n        <span>\n          Page {page} of {Math.ceil(totalRows / pageSize)}\n        </span>\n        <button\n          onClick={handleNextPage}\n          disabled={page >= Math.ceil(totalRows / pageSize)}\n          style={{\n            padding: \"8px 12px\",\n            cursor: page >= Math.ceil(totalRows / pageSize) ? \"not-allowed\" : \"pointer\",\n          }}\n        >\n          Next\n        </button>\n\n        <select\n          value={pageSize}\n          onChange={handlePageSizeChange}\n          style={{ marginLeft: \"20px\", padding: \"6px\" }}\n        >\n          {[5, 10, 25, 50].map((size) => (\n            <option key={size} value={size}>\n              {size} rows\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  );\n\n\n\n\n  return (\n    <div>\n\n      {/* Navigation Bar */}\n      {/* 不要动 */}\n      <div id=\"navbar\">\n        <ul>\n          <li><a href=\"http://localhost:3000/\">HomePage</a></li>\n          <li><a href=\"http://localhost:3000/search\">Search Page</a></li>\n          <li><a href=\"http://localhost:3000/genre\">Genre Page</a></li>\n          <li><a href=\"http://localhost:3000/collaboration\">Collaboration</a></li>\n        </ul>\n      </div>\n\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}